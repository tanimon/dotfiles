# Environment variables
[[ -f $HOME/.env ]] && source ${HOME}/.env
export CARAPACE_BRIDGES='zsh,fish,bash,inshellisense'
export PATH=$PATH:$HOME/.local/bin


# History
HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000
setopt inc_append_history
setopt hist_ignore_all_dups
setopt hist_no_store
setopt hist_reduce_blanks
setopt share_history


# Completion
autoload -Uz compinit
compinit
zstyle ':completion:*' menu select
zstyle ':completion:*' format $'\e[2;37mCompleting %d\e[m'
zstyle ':completion:*:git:*' group-order 'main commands' 'alias commands' 'external commands'

command -v aqua &>/dev/null && source <(aqua completion zsh)
command -v brew &>/dev/null && fpath=("$(brew --prefix)/share/zsh/site-functions" $fpath)
command -v chezmoi &>/dev/null && source <(chezmoi completion zsh)
command -v dyff &>/dev/null && source <(dyff completion zsh)
command -v kubectl &>/dev/null && source <(kubectl completion zsh)

fpath+=~/.zfunc


ZSH_AUTOSUGGEST_STRATEGY=(history completion)


# Disable beep when listing candidates for completion
setopt nolistbeep


# Enable zmv
autoload -Uz zmv
alias zmv='noglob zmv -W'


# Aliases
alias ls='eza'
alias ll='eza -l'
alias la='eza -la'

alias diff='difft --display side-by-side-show-both'


# Tool initializations
source <(carapace _carapace)
source <(fzf --zsh)
eval "$(/opt/homebrew/bin/mise activate zsh)"
eval "$(sheldon source)"
eval "$(starship init zsh)"
eval "$(zoxide init zsh --cmd cd)"


# pnpm
export PNPM_HOME="$HOME/Library/pnpm"
case ":$PATH:" in
  *":$PNPM_HOME:"*) ;;
  *) export PATH="$PNPM_HOME:$PATH" ;;
esac
# pnpm end
